# ngcc validation

This repository aims to validate the Angular Ivy compatibility compiler (`ngcc`). Each directory contains a project that uses a popular Angular package which is distributed with `metadata.json` files generated by `ngc`.

Each library is imported inside `app.module.ts`. The CI runs `ng build` in each directory to validate that `ngcc` is able to compile the given package to Ivy compatible format.

## How to add my library?

To add your library, follow the next simple 4 steps:

**Clone the repository**:

```
git clone git@github.com:angular/ngcc-validation
```

Inside of the root directory **create a new project with `--enable-ivy` option** set. Make sure you're using Angular CLI 8.1.2 or newer:

```
cd ngcc-validation
ng new [my-library-name]-ngcc --enable-ivy
```

**Disable differential loading** by setting `target` to `es5` in `tsconfig.json` in the newly created project to speed up the build.

In `app.module.ts` **add a side-effect import** of your library. For example:

```ts
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';

import 'ag-grid-angular';

import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
```

## My library is there, should I add tests?

Yes! The above instructions will only validate that your application could be successfully compiled with `ngcc`. To validate it actually works, it'll be great to add unit or e2e tests.

## License

MIT
